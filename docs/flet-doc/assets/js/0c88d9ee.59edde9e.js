"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[77127],{21835:(e,t,n)=>{n.r(t),n.d(t,{ImageCard:()=>c,assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>h});var s=n(74848),i=n(28453),r=n(67740);const l={slug:"standalone-flet-web-apps-with-pyodide",title:"Standalone Flet web apps with Pyodide",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["releases"]},a=void 0,o={permalink:"/docs/flet-doc/blog/standalone-flet-web-apps-with-pyodide",editUrl:"https://github.com/flet-dev/website/edit/main/blog/2023-02-06-standalone-flet-web-apps-with-pyodide.md",source:"@site/blog/2023-02-06-standalone-flet-web-apps-with-pyodide.md",title:"Standalone Flet web apps with Pyodide",description:"We've just released Flet 0.4.0 with a super exciting new feature - packaging Flet apps into a standalone static website that can be run entirely in the browser! The app can be published to any free hosting for static websites such as GitHub Pages or Cloudflare Pages. Thanks to Pyodide - a Python port to WebAssembly!",date:"2023-02-06T00:00:00.000Z",tags:[{inline:!0,label:"releases",permalink:"/docs/flet-doc/blog/tags/releases"}],readingTime:3.83,hasTruncateMarker:!1,authors:[{name:"Feodor Fitsner",title:"Flet founder and developer",url:"https://github.com/FeodorFitsner",imageURL:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4"}],frontMatter:{slug:"standalone-flet-web-apps-with-pyodide",title:"Standalone Flet web apps with Pyodide",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["releases"]},unlisted:!1,prevItem:{title:"Flet Charts",permalink:"/docs/flet-doc/blog/flet-charts"},nextItem:{title:"Packaging desktop apps with a custom icon",permalink:"/docs/flet-doc/blog/packaging-desktop-apps-with-custom-icon"}},d={authorsImageUrls:[void 0]},c=({title:e,href:t,imageUrl:n})=>{const l={div:"div",h2:"h2",img:"img",...(0,i.R)()};return(0,s.jsx)(l.div,{className:"col col--4 margin-bottom--lg",children:(0,s.jsxs)(r.A,{href:t,children:[(0,s.jsx)(l.img,{src:"/img/gallery/"+n,className:"screenshot-100"}),(0,s.jsx)(l.h2,{children:e})]})})},h=[{value:"Quick Flet with Pyodide demo",id:"quick-flet-with-pyodide-demo",level:2},{value:"Built-in Fletd server in Python",id:"built-in-fletd-server-in-python",level:2},{value:"Other changes",id:"other-changes",level:3},{value:"\ud83d\udca5 Breaking changes",id:"-breaking-changes",level:3},{value:"Async support",id:"async-support",level:2},{value:"Conclusion",id:"conclusion",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["We've just released ",(0,s.jsx)(t.a,{href:"https://pypi.org/project/flet/",children:"Flet 0.4.0"})," with a super exciting new feature - ",(0,s.jsx)(t.a,{href:"/docs/publish/web/static-website",children:"packaging Flet apps into a standalone static website"})," that can be run entirely in the browser! The app can be published to any free hosting for static websites such as GitHub Pages or Cloudflare Pages. Thanks to ",(0,s.jsx)(t.a,{href:"https://pyodide.org/en/stable/",children:"Pyodide"})," - a Python port to WebAssembly!"]}),"\n",(0,s.jsx)("img",{src:"/img/blog/pyodide/pyodide-logo.png",className:"screenshot-50"}),"\n",(0,s.jsx)(t.p,{children:"You can quickly build awesome single-page applications (SPA) entirely in Python and host them everywhere! No HTML, CSS or JavaScript required!"}),"\n",(0,s.jsx)(t.h2,{id:"quick-flet-with-pyodide-demo",children:"Quick Flet with Pyodide demo"}),"\n",(0,s.jsx)(t.p,{children:"Install the latest Flet package:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"pip install flet --upgrade\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Create a simple ",(0,s.jsx)(t.code,{children:"counter.py"})," app:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",metastring:'title="counter.py"',children:'import flet as ft\n\ndef main(page: ft.Page):\n    page.title = "Flet counter example"\n    page.vertical_alignment = ft.MainAxisAlignment.CENTER\n\n    txt_number = ft.TextField(value="0", text_align=ft.TextAlign.RIGHT, width=100)\n\n    def minus_click(e):\n        txt_number.value = str(int(txt_number.value) - 1)\n        page.update()\n\n    def plus_click(e):\n        txt_number.value = str(int(txt_number.value) + 1)\n        page.update()\n\n    page.add(\n        ft.Row(\n            [\n                ft.IconButton(ft.Icons.REMOVE, on_click=minus_click),\n                txt_number,\n                ft.IconButton(ft.Icons.ADD, on_click=plus_click),\n            ],\n            alignment=ft.MainAxisAlignment.CENTER,\n        )\n    )\n\nft.app(main)\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Run a brand-new ",(0,s.jsx)(t.code,{children:"flet publish"})," command to publish Flet app as a static website:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"flet publish counter.py\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The website will be published to ",(0,s.jsx)(t.code,{children:"dist"})," directory next to ",(0,s.jsx)(t.code,{children:"counter.py"}),".\nGive website a try using built-in Python web server:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"python -m http.server --directory dist\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Open ",(0,s.jsx)(t.code,{children:"http://localhost:8000"})," in your browser to check the published app."]}),"\n",(0,s.jsx)("img",{src:"/img/docs/getting-started/flet-counter-safari.png",className:"screenshot-50"}),"\n",(0,s.jsx)(t.p,{children:"Here are a few live Flet apps hosted at Cloudflare Pages:"}),"\n","\n",(0,s.jsx)("div",{className:"margin-top--lg",children:(0,s.jsxs)("section",{className:"row",children:[(0,s.jsx)(c,{title:"To-Do",href:"https://gallery.flet.dev/todo/",imageUrl:"todo.png"}),(0,s.jsx)(c,{title:"Icons browser",href:"https://gallery.flet.dev/icons-browser/",imageUrl:"icons-browser.png"}),(0,s.jsx)(c,{title:"Calc",href:"https://gallery.flet.dev/calculator/",imageUrl:"calc.png"}),(0,s.jsx)(c,{title:"Solitaire",href:"https://gallery.flet.dev/solitaire/",imageUrl:"solitaire.png"}),(0,s.jsx)(c,{title:"Trolli",href:"https://gallery.flet.dev/trolli/",imageUrl:"trolli.png"})]})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"/docs/publish/web/static-website",children:"Check the guide"})," for more information about publishing Flet apps as standalone websites."]}),"\n",(0,s.jsx)(t.h2,{id:"built-in-fletd-server-in-python",children:"Built-in Fletd server in Python"}),"\n",(0,s.jsxs)(t.p,{children:["Flet 0.4.0 also implements a ",(0,s.jsx)(t.a,{href:"https://flet.dev/blog/flet-mobile-update#flet-new-desktop-architecture",children:"new Flet desktop architecture"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"It replaces Fletd server written in Go with a light-weight shim written in Python with a number of pros:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Only 2 system processes are needed to run Flet app: Python interpreter and Flutter client."}),"\n",(0,s.jsx)(t.li,{children:"Less communication overhead (minus two network hops between Python and Fletd) and lower latency (shim uses TCP on Windows and Unix domain sockets on macOS/Linux)."}),"\n",(0,s.jsxs)(t.li,{children:["Shim binds to ",(0,s.jsx)(t.code,{children:"127.0.0.1"})," on Windows by default which is more secure."]}),"\n",(0,s.jsxs)(t.li,{children:["The size of a standalone app bundle produced by ",(0,s.jsx)(t.code,{children:"flet pack"})," reduced by ~8 MB."]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The implementation was also required to support Pyodide (we can't run Go web server in the browser, right?) and paves the way to iOS and Android support."}),"\n",(0,s.jsx)(t.h3,{id:"other-changes",children:"Other changes"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["All controls loading resources from web URLs (",(0,s.jsx)(t.code,{children:"Image.src"}),", ",(0,s.jsx)(t.code,{children:"Audio.src"}),", ",(0,s.jsx)(t.code,{children:"Page.fonts"}),", ",(0,s.jsx)(t.code,{children:"Container.image_src"}),") are now able to load them from local files too, by providing a full path in the file system, and from ",(0,s.jsx)(t.code,{children:"assets"})," directory by providing relative path. For desktop apps a path in ",(0,s.jsx)(t.code,{children:"src"})," property could be one of the following:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["A path relative to ",(0,s.jsx)(t.code,{children:"assets"})," directory, with or without starting slash, for example: ",(0,s.jsx)(t.code,{children:"/image.png"})," or ",(0,s.jsx)(t.code,{children:"image.png"}),". The name of artifact dir should not be included."]}),"\n",(0,s.jsxs)(t.li,{children:["An absolute path within a computer file system, e.g. ",(0,s.jsx)(t.code,{children:"C:\\projects\\app\\assets\\image.png"})," or ",(0,s.jsx)(t.code,{children:"/Users/john/images/picture.png"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["A full URL, e.g. ",(0,s.jsx)(t.code,{children:"https://mysite.com/images/pic.png"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Add ",(0,s.jsx)(t.code,{children:'page.on_error = lambda e: print("Page error:", e.data)'})," to see failing images."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"flet"})," Python package has separated into two packages: ",(0,s.jsx)(t.code,{children:"flet-core"})," and ",(0,s.jsx)(t.code,{children:"flet"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"PDM replaced with Poetry."}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"beartype"})," removed everywhere."]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"-breaking-changes",children:"\ud83d\udca5 Breaking changes"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:['Default routing scheme changed from "hash" to "path" (no ',(0,s.jsx)(t.code,{children:"/#/"})," at the end of app URL). Use ",(0,s.jsx)(t.code,{children:'ft.app(main, route_url_strategy="hash")'})," to get original behavior."]}),"\n",(0,s.jsx)(t.li,{children:"OAuth authentication is not supported anymore in standalone desktop Flet apps."}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"async-support",children:"Async support"}),"\n",(0,s.jsxs)(t.p,{children:["Flet apps can now be written as async apps and use ",(0,s.jsx)(t.code,{children:"asyncio"})," with other Python async libraries. Calling coroutines is naturally supported in Flet, so you don't need to wrap them to run synchronously."]}),"\n",(0,s.jsxs)(t.p,{children:["To start with an async Flet app you should make ",(0,s.jsx)(t.code,{children:"main()"})," method ",(0,s.jsx)(t.code,{children:"async"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'import flet as ft\n\nasync def main(page: ft.Page):\n    await page.add_async(ft.Text("Hello, async world!"))\n\nft.app(main)\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"/docs/getting-started/async-apps",children:"Read the guide"})," for more information about writing async Flet apps."]}),"\n",(0,s.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(t.p,{children:"Flet 0.4.0 brings the following exciting features:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Standalone web apps with Pyodide running in the browser and hosted on a cheap hosting."}),"\n",(0,s.jsx)(t.li,{children:"Faster and more secure architecture with a built-in Fletd server."}),"\n",(0,s.jsx)(t.li,{children:"Async apps support."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Upgrade Flet module to the latest version (",(0,s.jsx)(t.code,{children:"pip install flet --upgrade"}),"), give ",(0,s.jsx)(t.code,{children:"flet publish"})," command a try and ",(0,s.jsx)(t.a,{href:"https://discord.gg/dzWXP8SHG8",children:"let us know"})," what you think!"]}),"\n",(0,s.jsxs)(t.p,{children:["Hey, by the way, ",(0,s.jsx)(t.a,{href:"https://github.com/flet-dev/flet",children:"Flet project"})," has reached \u2b50\ufe0f 4.2K stars \u2b50\ufe0f (+1K in just one month) - keep going!"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},67740:(e,t,n)=>{n.d(t,{A:()=>l});n(96540);const s={cardContainer:"cardContainer_nYI1",cardTitle:"cardTitle_LFdy",cardDescription:"cardDescription_eAqL"};var i=n(20053),r=n(74848);function l(e){return e.href?(0,r.jsx)("a",{href:e.href,className:(0,i.A)("card padding--md",s.cardContainer),children:e.children}):(0,r.jsx)("div",{className:(0,i.A)("card padding--md",s.cardContainer),children:e.children})}},20053:(e,t,n)=>{function s(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=s(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}n.d(t,{A:()=>i});const i=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=s(e))&&(i&&(i+=" "),i+=t);return i}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>a});var s=n(96540);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);