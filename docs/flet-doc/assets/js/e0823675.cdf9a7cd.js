"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[22161],{28919:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});var n=t(74848),i=t(28453);const s={title:"Hosting Flet website on Cloudflare",sidebar_label:"Cloudflare"},l=void 0,r={id:"publish/web/static-website/hosting/cloudflare",title:"Hosting Flet website on Cloudflare",description:"This guide provides the instructions for hosting Flet static website on Cloudflare.",source:"@site/docs/publish/web/static-website/hosting/cloudflare.md",sourceDirName:"publish/web/static-website/hosting",slug:"/publish/web/static-website/hosting/cloudflare",permalink:"/docs/flet-doc/docs/publish/web/static-website/hosting/cloudflare",draft:!1,unlisted:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/publish/web/static-website/hosting/cloudflare.md",tags:[],version:"current",frontMatter:{title:"Hosting Flet website on Cloudflare",sidebar_label:"Cloudflare"},sidebar:"docs",previous:{title:"Hosting",permalink:"/docs/flet-doc/docs/publish/web/static-website/hosting"},next:{title:"Dynamic website",permalink:"/docs/flet-doc/docs/publish/web/dynamic-website"}},d={},a=[{value:"Connecting to a Git provider",id:"connecting-to-a-git-provider",level:2},{value:"Direct Upload",id:"direct-upload",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function c(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{children:"This guide provides the instructions for hosting Flet static website on Cloudflare."}),"\n",(0,n.jsxs)(o.p,{children:["Before we get to the deployment, you will need an account. Get one from ",(0,n.jsx)(o.a,{href:"https://dash.cloudflare.com/sign-up/pages",children:"here"}),", or simply login if you already have one. After signing up, you will have to verify your email address by clicking the link you will receive in your email. Check the spams too, if you don\u2019t get it in your inbox."]}),"\n",(0,n.jsx)(o.p,{children:'In your account, from the side menu, select "Pages" as shown below:'}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/pages-from-sidebar.png"}),"\n",(0,n.jsx)(o.p,{children:"And from there, select the \u201cCreate a project\u201d button:"}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/project-creation.png"}),"\n",(0,n.jsx)(o.p,{children:"Cloudflare proposes three ways to create a project. Only the first two will be exposed here:"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"Connect to a git provider"}),"\n",(0,n.jsx)(o.li,{children:"Direct upload"}),"\n"]}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/deployment-methods.png"}),"\n",(0,n.jsx)(o.h2,{id:"connecting-to-a-git-provider",children:"Connecting to a Git provider"}),"\n",(0,n.jsx)(o.admonition,{type:"note",children:(0,n.jsxs)(o.p,{children:["This method works for ",(0,n.jsx)(o.code,{children:"flet publish"})," command only."]})}),"\n",(0,n.jsxs)(o.p,{children:["For this, you will need to have a ",(0,n.jsx)(o.a,{href:"https://github.com/",children:"GitHub"})," or ",(0,n.jsx)(o.a,{href:"https://gitlab.com/",children:"GitLab"})," account. In this account should be the repository you plan to use. An example could be found in this ",(0,n.jsx)(o.a,{href:"https://github.com/ndonkoHenri/Flutter-Counter-Clone",children:"repo"}),"."]}),"\n",(0,n.jsx)(o.p,{children:"Click on the \u201cConnect to Git\u201d blue button:"}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/git-account-selection.png"}),"\n",(0,n.jsx)(o.p,{children:"From there, select the tab with the service containing your repository. Then, connect your account. Select one of the suggested options, then click on \u201cInstall & Authorize\u201d."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/git-auth.png"}),"\n",(0,n.jsx)(o.p,{children:"Choose the repository to be used, and press on the \u201cBegin setup\u201d button."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/repo-selection.png"}),"\n",(0,n.jsxs)(o.p,{children:["Before moving on, add a ",(0,n.jsx)(o.code,{children:"runtime.txt"})," file in your repo. It should contain the python version to be used. In the file enter 3.7 which is the latest python version Cloudflare uses at time of writing."]}),"\n",(0,n.jsxs)(o.p,{children:[(0,n.jsx)(o.a,{href:"https://github.com/ndonkoHenri/Flutter-Counter-Clone/blob/master/runtime.txt",children:"Here"})," is an example from the repo above."]}),"\n",(0,n.jsx)(o.p,{children:"Having this done, we can now move to the next step which will be to configure some build and deployment settings for your site."}),"\n",(0,n.jsx)(o.p,{children:"Set the name of your project, and the production branch to be used. The production branch is simply the branch of your repo to which any push of a commit will automatically trigger a deployment to your production environment. Pushes to your other branches will trigger deployment instead to your preview environment."}),"\n",(0,n.jsx)(o.p,{children:"After setting these two, jump down to the \u201cBuild settings\u201d section where we will be setting up the build instructions."}),"\n",(0,n.jsx)(o.p,{children:"Skip the \u201cFramework preset\u201d (allow None) because Flet is neither in the list nor a JavaScript framework :)"}),"\n",(0,n.jsx)(o.p,{children:"The \u201cBuild command\u201d depends on your application's structure. Follow the guide in the sections above to come up with your custom build command."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/flet-publish-help.png"}),"\n",(0,n.jsx)(o.p,{children:"When the build command is ran by flet, a folder named \u2018dist\u2019 is created which will contain all the web files required by Cloudflare pages. Set it as your output directory. Note that this file will not be added to your repository, because Cloudflare only has read access to your code."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/build-settings.png"}),"\n",(0,n.jsx)(o.p,{children:"You could optionally specify advanced parameters: the root directory (the directory in which Cloudflare runs the build command), and Environment variables (variables to be used during build time).\nNow, click on the \u201cSave and Deploy\u201d button and let Cloudflare do the remaining job for you."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/successful-deployment.png"}),"\n",(0,n.jsx)(o.p,{children:"Click on the URL that will be shown to move to your deployed site."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/app-link-1.png"}),"\n",(0,n.jsxs)(o.p,{children:["If when opening the site you see a Cloudflare error, it means they haven\u2019t completely finished the setup. So, simply wait for a minute then refresh the page, and you will see your application running.\nTest the above deployed site ",(0,n.jsx)(o.a,{href:"https://flet-counter.pages.dev/",children:"here"}),"."]}),"\n",(0,n.jsx)(o.h2,{id:"direct-upload",children:"Direct Upload"}),"\n",(0,n.jsx)(o.admonition,{type:"note",children:(0,n.jsxs)(o.p,{children:["This method works for both ",(0,n.jsx)(o.code,{children:"flet build web"})," and ",(0,n.jsx)(o.code,{children:"flet publish"})," commands."]})}),"\n",(0,n.jsx)(o.p,{children:"Click on \u201cUpload assets\u201d. In step one, give your project a name. Remember that the name you will give will be used to determine the link to which your project will be deployed to."}),"\n",(0,n.jsx)(o.p,{children:"The second step requires you to upload your project\u2019s assets, either as folder or a zip file (with all the assets inside). If you already have one of them, then use the drag-and-drop or select them using the folder picker."}),"\n",(0,n.jsxs)(o.p,{children:["If you don\u2019t yet have these assets but already have an app you've built, use the ",(0,n.jsx)(o.code,{children:"flet publish"})," command in the directory containing your app files, and a ",(0,n.jsx)(o.code,{children:"dist"})," folder will be created which you will then upload to Cloudflare pages as mentioned above."]}),"\n",(0,n.jsx)(o.p,{children:"After the upload press on \u201cDeploy site\u201d button at the bottom."}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/assets-upload.png"}),"\n",(0,n.jsxs)(o.p,{children:["You will then see a success message with a link to your deployed website. Test an example of a deployed site ",(0,n.jsx)(o.a,{href:"https://todo-2.pages.dev/",children:"here"}),"."]}),"\n",(0,n.jsx)("img",{src:"/docs/flet-doc/img/docs/cloudflare-pages-deploy/app-link-2.png"}),"\n",(0,n.jsx)(o.p,{children:"If when opening the site you see a Cloudflare error, it means they haven\u2019t completely finished the setup. So, simply wait for a minute then refresh the page, and you will see your application running.\nYou can now click on the \u201cContinue to project\u201d button to monitor your deployments, or create new ones following the same steps above."}),"\n",(0,n.jsx)(o.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsxs)(o.p,{children:["When Flet app is running in a web browser all its ",(0,n.jsx)(o.code,{children:"print()"}),' statements are displayed in "Console" tab of Developer Tools in a browser. ',(0,n.jsx)(o.code,{children:"print()"})," can be used as a simple debugging tool."]}),"\n",(0,n.jsxs)(o.p,{children:["You can also use ",(0,n.jsx)(o.code,{children:"logging"})," module and output messages to Console with different severity."]}),"\n",(0,n.jsx)(o.p,{children:"To enable detailed Flet logging add this to your program:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-python",children:"import logging\nlogging.basicConfig(level=logging.DEBUG)\n"})})]})}function h(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,o,t)=>{t.d(o,{R:()=>l,x:()=>r});var n=t(96540);const i={},s=n.createContext(i);function l(e){const o=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(s.Provider,{value:o},e.children)}}}]);