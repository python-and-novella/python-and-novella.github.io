"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[52921],{3857:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var i=t(74848),r=t(28453),o=t(14252);const s={slug:"user-authentication",title:"User authentication",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["release"]},a=void 0,l={permalink:"/docs/flet-docs/blog/user-authentication",editUrl:"https://github.com/flet-dev/website/edit/main/blog/2022-09-27-user-authentication.md",source:"@site/blog/2022-09-27-user-authentication.md",title:"User authentication",description:"User authentication in Flet is here! \ud83c\udf89",date:"2022-09-27T00:00:00.000Z",tags:[{inline:!0,label:"release",permalink:"/docs/flet-docs/blog/tags/release"}],readingTime:2.86,hasTruncateMarker:!1,authors:[{name:"Feodor Fitsner",title:"Flet founder and developer",url:"https://github.com/FeodorFitsner",imageURL:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4"}],frontMatter:{slug:"user-authentication",title:"User authentication",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["release"]},unlisted:!1,prevItem:{title:"Gesture detector",permalink:"/docs/flet-docs/blog/gesture-detector"},nextItem:{title:"File picker and uploads",permalink:"/docs/flet-docs/blog/file-picker-and-uploads"}},c={authorsImageUrls:[void 0]},d=[{value:"Authentication",id:"authentication",level:2},{value:"Client storage",id:"client-storage",level:2},{value:"Session storage",id:"session-storage",level:2},{value:"Encryption API",id:"encryption-api",level:2},{value:"Other improvements",id:"other-improvements",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"User authentication in Flet is here! \ud83c\udf89"}),"\n",(0,i.jsx)(n.p,{children:'Now you can implement user authentication ("Login with X" buttons) in your Flet app using 3rd-party identity providers such as GitHub, Google, Azure, Auth0, LinkedIn and others:'}),"\n",(0,i.jsx)("img",{src:"/docs/flet-docs/img/docs/getting-started/authentication/github-oauth-authorize.png",className:"screenshot-40"}),"\n",(0,i.jsx)(n.p,{children:"Traditionally, this release is not just about authentication, but it adds a ton of accompanying functionality and small improvements:"}),"\n",(0,i.jsx)(o.A,{toc:d,maxHeadingLevel:2}),"\n",(0,i.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(n.p,{children:"Flet authentication features:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Works with Flet desktop, web and mobile apps."}),"\n",(0,i.jsx)(n.li,{children:"Using multiple authentication providers in one app."}),"\n",(0,i.jsxs)(n.li,{children:["Built-in OAuth providers with automatic user details fetching:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"GitHub"}),"\n",(0,i.jsx)(n.li,{children:"Azure"}),"\n",(0,i.jsx)(n.li,{children:"Google"}),"\n",(0,i.jsx)(n.li,{children:"Auth0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Optional groups fetching."}),"\n",(0,i.jsx)(n.li,{children:"Automatic token refresh."}),"\n",(0,i.jsx)(n.li,{children:'Login with a saved token ("Remember me").'}),"\n",(0,i.jsx)(n.li,{children:"Custom OAuth providers."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:'A simple example on how to add "Login with GitHub" button to your Flet app:'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os\n\nimport flet as ft\nfrom flet.auth.providers.github_oauth_provider import GitHubOAuthProvider\n\ndef main(page: ft.Page):\n\n    provider = GitHubOAuthProvider(\n        client_id=os.getenv("GITHUB_CLIENT_ID"),\n        client_secret=os.getenv("GITHUB_CLIENT_SECRET"),\n        redirect_url="http://localhost:8550/api/oauth/redirect",\n    )\n\n    def login_click(e):\n        page.login(provider)\n\n    def on_login(e):\n        print("Access token:", page.auth.token.access_token)\n        print("User ID:", page.auth.user.id)\n\n    page.on_login = on_login\n    page.add(ft.ElevatedButton("Login with GitHub", on_click=login_click))\n\nft.app(target=main, port=8550, view=ft.AppView.WEB_BROWSER)\n'})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"Before running the app set the secret environment variables in a command line:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ export GITHUB_CLIENT_ID="<client_id>"\n$ export GITHUB_CLIENT_SECRET="<client_secret>"\n'})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/docs/cookbook/authentication",children:"Read Authentication guide for more information and examples"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"client-storage",children:"Client storage"}),"\n",(0,i.jsxs)(n.p,{children:["Flet's client storage API that allows storing key-value data on a client side in a persistent storage. Flet implementation uses ",(0,i.jsx)(n.a,{href:"https://pub.dev/packages/shared_preferences",children:(0,i.jsx)(n.code,{children:"shared_preferences"})})," Flutter package."]}),"\n",(0,i.jsx)(n.p,{children:"Writing data to the storage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'page.client_storage.set("key", "value")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Reading data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'value = page.client_storage.get("key")\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/docs/cookbook/client-storage",children:"Read Client storage guide for more information and examples"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"session-storage",children:"Session storage"}),"\n",(0,i.jsx)(n.p,{children:"Flet introduces an API for storing key-value data in user's session on a server side."}),"\n",(0,i.jsx)(n.p,{children:"Writing data to the session:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'page.session.set("key", "value")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Reading data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'value = page.session.get("key")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"/docs/cookbook/session-storage",children:"Read Session storage guide for more information and examples"})}),"\n",(0,i.jsx)(n.h2,{id:"encryption-api",children:"Encryption API"}),"\n",(0,i.jsxs)(n.p,{children:["In this release Flet introduces utility methods to encrypt and decrypt sensitive text data using symmetric algorithm (where the same key is used for encryption and decryption). It uses ",(0,i.jsx)(n.a,{href:"https://github.com/fernet/spec/blob/master/Spec.md",children:"Fernet"})," implementation from ",(0,i.jsx)(n.a,{href:"https://pypi.org/project/cryptography/",children:"cryptography"})," package, which is AES 128 with some additional hardening, plus PBKDF2 to derive encryption key from a user passphrase."]}),"\n",(0,i.jsx)(n.p,{children:"Encrypting data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from flet.security import encrypt, decrypt\nsecret_key = "S3CreT!"\nplain_text = "This is a secret message!"\nencrypted_data = encrypt(plain_text, secret_key)\n'})}),"\n",(0,i.jsx)(n.p,{children:"Decrypting data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from flet.security import encrypt, decrypt\nsecret_key = "S3CreT!"\nplain_text = decrypt(encrypted_data, secret_key)\nprint(plain_text)\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/docs/cookbook/encrypting-sensitive-data",children:"Continue reading for more information and examples"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"other-improvements",children:"Other improvements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["SVG image support (",(0,i.jsx)(n.a,{href:"https://github.com/flet-dev/examples/blob/main/python/controls/image/svg-image.py",children:"example"}),") and new images properties:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/image#color",children:(0,i.jsx)(n.code,{children:"Image.color"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/image#color_blend_mode",children:(0,i.jsx)(n.code,{children:"Image.color_blend_mode"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/image#semantics_label",children:(0,i.jsx)(n.code,{children:"Image.semantics_label"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/image#gapless_playback",children:(0,i.jsx)(n.code,{children:"Image.gapless_playback"})})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"/docs/cookbook/animations#animation-end-callback",children:[(0,i.jsx)(n.code,{children:"on_animation_end"})," callback"]})," to chain animations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.a,{href:"/docs/controls/container#clip_behavior",children:[(0,i.jsx)(n.code,{children:"Container.clip_behavior"})," property"]}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/reference/types/window#bgcolor",children:(0,i.jsx)(n.code,{children:"page.window.bgcolor"})})," to make cool transparent app window:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import flet as ft\ndef main(page: ft.Page):\n    page.window_bgcolor = ft.Colors.TRANSPARENT\n    page.bgcolor=ft.Colors.TRANSPARENT\n    page.window_title_bar_hidden = True\n    page.window_frameless = True\n    page.window_left = 400\n    page.window_top = 400\n    page.add(ft.ElevatedButton("I\'m a floating button!"))\nft.app(target=main)\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/page#get_clipboard",children:(0,i.jsx)(n.code,{children:"page.get_clipboard()"})})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/controls/page#launch_urlurl",children:(0,i.jsx)(n.code,{children:"page.launch_url()"})})," - better control with additional arguments:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"web_window_name"})," - window tab/name to open URL in: ",(0,i.jsx)(n.code,{children:"_self"})," - the same tab, ",(0,i.jsx)(n.code,{children:"_blank"})," - a new tab or ",(0,i.jsx)(n.code,{children:"<your name>"})," - a named tab."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"web_popup_window"})," - set to ",(0,i.jsx)(n.code,{children:"True"})," to display a URL in a browser popup window. Default is ",(0,i.jsx)(n.code,{children:"False"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"window_width"})," - optional, popup window width."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"window_height"})," - optional, popup window height."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/reference/types/window#to_front",children:(0,i.jsx)(n.code,{children:"page.window.to_front()"})})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/controls/page#close_in_app_web_view",children:(0,i.jsx)(n.code,{children:"page.close_in_app_web_view()"})})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Upgrade Flet module to the latest version (",(0,i.jsx)(n.code,{children:"pip install flet --upgrade"}),"), integrate auth in your app and ",(0,i.jsx)(n.a,{href:"https://discord.gg/dzWXP8SHG8",children:"let us know"})," what you think!"]}),"\n",(0,i.jsx)(n.p,{children:"Enjoy!"})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},14252:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var i=t(65195);const r={tableOfContentsInline:"tableOfContentsInline_prmo"};var o=t(74848);function s(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:s}=e;return(0,o.jsx)("div",{className:r.tableOfContentsInline,children:(0,o.jsx)(i.A,{toc:n,minHeadingLevel:t,maxHeadingLevel:s,className:"table-of-contents",linkClassName:null})})}},65195:(e,n,t)=>{t.d(n,{A:()=>g});var i=t(96540),r=t(6342);function o(e){const n=e.map((e=>({...e,parentIndex:-1,children:[]}))),t=Array(7).fill(-1);n.forEach(((e,n)=>{const i=t.slice(2,e.level);e.parentIndex=Math.max(...i),t[e.level]=n}));const i=[];return n.forEach((e=>{const{parentIndex:t,...r}=e;t>=0?n[t].children.push(r):i.push(r)})),i}function s(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return n.flatMap((e=>{const n=s({toc:e.children,minHeadingLevel:t,maxHeadingLevel:i});return function(e){return e.level>=t&&e.level<=i}(e)?[{...e,children:n}]:n}))}function a(e){const n=e.getBoundingClientRect();return n.top===n.bottom?a(e.parentNode):n}function l(e,n){var t;let{anchorTopOffset:i}=n;const r=e.find((e=>a(e).top>=i));if(r){var o;return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(a(r))?r:null!=(o=e[e.indexOf(r)-1])?o:null}return null!=(t=e[e.length-1])?t:null}function c(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:n}}=(0,r.p)();return(0,i.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function d(e){const n=(0,i.useRef)(void 0),t=c();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:r,minHeadingLevel:o,maxHeadingLevel:s}=e;function a(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),a=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const i=[];for(let r=n;r<=t;r+=1)i.push("h"+r+".anchor");return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:o,maxHeadingLevel:s}),c=l(a,{anchorTopOffset:t.current}),d=e.find((e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(r),e.classList.add(r),n.current=e):e.classList.remove(r)}(e,e===d)}))}return document.addEventListener("scroll",a),document.addEventListener("resize",a),a(),()=>{document.removeEventListener("scroll",a),document.removeEventListener("resize",a)}}),[e,t])}var h=t(28774),p=t(74848);function u(e){let{toc:n,className:t,linkClassName:i,isChild:r}=e;return n.length?(0,p.jsx)("ul",{className:r?void 0:t,children:n.map((e=>(0,p.jsxs)("li",{children:[(0,p.jsx)(h.A,{to:"#"+e.id,className:null!=i?i:void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,p.jsx)(u,{isChild:!0,toc:e.children,className:t,linkClassName:i})]},e.id)))}):null}const m=i.memo(u);function g(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:a="table-of-contents__link",linkActiveClassName:l,minHeadingLevel:c,maxHeadingLevel:h,...u}=e;const g=(0,r.p)(),x=null!=c?c:g.tableOfContents.minHeadingLevel,f=null!=h?h:g.tableOfContents.maxHeadingLevel,j=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:r}=e;return(0,i.useMemo)((()=>s({toc:o(n),minHeadingLevel:t,maxHeadingLevel:r})),[n,t,r])}({toc:n,minHeadingLevel:x,maxHeadingLevel:f});return d((0,i.useMemo)((()=>{if(a&&l)return{linkClassName:a,linkActiveClassName:l,minHeadingLevel:x,maxHeadingLevel:f}}),[a,l,x,f])),(0,p.jsx)(m,{toc:j,className:t,linkClassName:a,...u})}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);