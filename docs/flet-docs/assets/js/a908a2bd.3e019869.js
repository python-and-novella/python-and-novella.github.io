"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[81850],{88172:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var r=n(74848),o=n(28453);const s={slug:"control-refs",title:"Control Refs",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["how-to"]},a=void 0,l={permalink:"/docs/flet-docs/blog/control-refs",editUrl:"https://github.com/flet-dev/website/edit/main/blog/2022-08-03-control-refs.md",source:"@site/blog/2022-08-03-control-refs.md",title:"Control Refs",description:"Flet controls are objects and to access their properties we need to keep references (variables) to those objects.",date:"2022-08-03T00:00:00.000Z",tags:[{inline:!0,label:"how-to",permalink:"/docs/flet-docs/blog/tags/how-to"}],readingTime:2.065,hasTruncateMarker:!1,authors:[{name:"Feodor Fitsner",title:"Flet founder and developer",url:"https://github.com/FeodorFitsner",imageURL:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4"}],frontMatter:{slug:"control-refs",title:"Control Refs",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["how-to"]},unlisted:!1,prevItem:{title:"Beautiful gradients, button styles and TextField rounded corners in a new Flet release",permalink:"/docs/flet-docs/blog/gradients-button-textfield-styles"},nextItem:{title:"Flet Mobile Strategy",permalink:"/docs/flet-docs/blog/flet-mobile-strategy"}},i={authorsImageUrls:[void 0]},c=[{value:"<code>Ref</code> class",id:"ref-class",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"Flet controls are objects and to access their properties we need to keep references (variables) to those objects."}),"\n",(0,r.jsx)(t.p,{children:"Consider the following example:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:"{6-8,18,19,21}",children:'import flet as ft\n\ndef main(page):\n\n    first_name = ft.TextField(label="First name", autofocus=True)\n    last_name = ft.TextField(label="Last name")\n    greetings = ft.Column()\n\n    def btn_click(e):\n        greetings.controls.append(ft.Text(f"Hello, {first_name.value} {last_name.value}!"))\n        first_name.value = ""\n        last_name.value = ""\n        page.update()\n        first_name.focus()\n\n    page.add(\n        first_name,\n        last_name,\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        greetings,\n    )\n\nft.app(target=main)\n'})}),"\n",(0,r.jsxs)(t.p,{children:["In the very beginning of ",(0,r.jsx)(t.code,{children:"main()"})," method we create three controls which we are going to use in button's ",(0,r.jsx)(t.code,{children:"on_click"})," handler: two ",(0,r.jsx)(t.code,{children:"TextField"})," for first and last names and a ",(0,r.jsx)(t.code,{children:"Column"})," - container for greeting messages. We create controls with all their properties set and in the end of ",(0,r.jsx)(t.code,{children:"main()"})," method, in ",(0,r.jsx)(t.code,{children:"page.add()"})," call, we use their references (variables)."]}),"\n",(0,r.jsxs)(t.p,{children:["When more and mode controls and event handlers added it becomes challenging to keep all control definitions in one place, so they become scattered across ",(0,r.jsx)(t.code,{children:"main()"})," body. Glancing at ",(0,r.jsx)(t.code,{children:"page.add()"})," parameters it's hard to imagine (without constant jumping to variable definitions in IDE) what would the end form look like:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:"{2-5}",children:'    page.add(\n        first_name,\n        last_name,\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        greetings,\n    )\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Is ",(0,r.jsx)(t.code,{children:"first_name"})," a TextField, does it have autofocus set? Is greetings a ",(0,r.jsx)(t.code,{children:"Row"})," or a ",(0,r.jsx)(t.code,{children:"Column"}),"?"]}),"\n",(0,r.jsxs)(t.h2,{id:"ref-class",children:[(0,r.jsx)(t.code,{children:"Ref"})," class"]}),"\n",(0,r.jsxs)(t.p,{children:["Flet provides ",(0,r.jsx)(t.code,{children:"Ref"})," utility class which allows to define a reference to the control, use that reference in event handlers and set the reference to a real control later, while building a tree. The idea comes from ",(0,r.jsx)(t.a,{href:"https://reactjs.org/docs/refs-and-the-dom.html",children:"React"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"To define a new typed control reference:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:"first_name = ft.Ref[ft.TextField]()\n"})}),"\n",(0,r.jsxs)(t.p,{children:["To access referenced control (control de-reference) use ",(0,r.jsx)(t.code,{children:"Ref.current"})," property:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'# empty first name\nfirst_name.current.value = ""\n'})}),"\n",(0,r.jsxs)(t.p,{children:["To assign control to a reference set ",(0,r.jsx)(t.code,{children:"Control.ref"})," property to a reference:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:"{2}",children:'page.add(\n    ft.TextField(ref=first_name, label="First name", autofocus=True)\n)\n'})}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["All Flet controls have ",(0,r.jsx)(t.code,{children:"ref"})," property."]})}),"\n",(0,r.jsx)(t.p,{children:"We could re-write our program to use references:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",metastring:"{7-9,21-24}",children:'import flet as ft\n\n\ndef main(page):\n\n    first_name = ft.Ref[ft.TextField]()\n    last_name = ft.Ref[ft.TextField]()\n    greetings = ft.Ref[ft.Column]()\n\n    def btn_click(e):\n        greetings.current.controls.append(\n            ft.Text(f"Hello, {first_name.current.value} {last_name.current.value}!")\n        )\n        first_name.current.value = ""\n        last_name.current.value = ""\n        page.update()\n        first_name.current.focus()\n\n    page.add(\n        ft.TextField(ref=first_name, label="First name", autofocus=True),\n        ft.TextField(ref=last_name, label="Last name"),\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        ft.Column(ref=greetings),\n    )\n\nft.app(target=main)\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Now we can clearly see in ",(0,r.jsx)(t.code,{children:"page.add()"})," the structure of the page and all the controls it's built of."]}),"\n",(0,r.jsxs)(t.p,{children:["Yes, the logic becomes a little bit more verbose as you need to add ",(0,r.jsx)(t.code,{children:".current."})," to access ref's control, but it's a matter of personal preference :)"]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"/docs",children:"Give Flet a try"})," and ",(0,r.jsx)(t.a,{href:"https://discord.gg/dzWXP8SHG8",children:"let us know"})," what you think!"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var r=n(96540);const o={},s=r.createContext(o);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);