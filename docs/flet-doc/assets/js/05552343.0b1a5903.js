"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[34126],{19017:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>f,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var o=t(74848),r=t(28453);const s={title:"Control Refs",sidebar_label:"Control Refs"},a=void 0,c={id:"cookbook/control-refs",title:"Control Refs",description:"Flet controls are objects and to access their properties we need to keep references (variables) to those objects.",source:"@site/docs/cookbook/control-refs.md",sourceDirName:"cookbook",slug:"/cookbook/control-refs",permalink:"/docs/flet-doc/docs/cookbook/control-refs",draft:!1,unlisted:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/cookbook/control-refs.md",tags:[],version:"current",frontMatter:{title:"Control Refs",sidebar_label:"Control Refs"},sidebar:"docs",previous:{title:"PubSub",permalink:"/docs/flet-doc/docs/cookbook/pub-sub"},next:{title:"Accessibility",permalink:"/docs/flet-doc/docs/cookbook/accessibility"}},l={},i=[{value:"<code>Ref</code> class",id:"ref-class",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Flet controls are objects and to access their properties we need to keep references (variables) to those objects."}),"\n",(0,o.jsx)(n.p,{children:"Consider the following example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"{6-8,18,19,21}",children:'import flet as ft\n\ndef main(page):\n\n    first_name = ft.TextField(label="First name", autofocus=True)\n    last_name = ft.TextField(label="Last name")\n    greetings = ft.Column()\n\n    def btn_click(e):\n        greetings.controls.append(ft.Text(f"Hello, {first_name.value} {last_name.value}!"))\n        first_name.value = ""\n        last_name.value = ""\n        page.update()\n        first_name.focus()\n\n    page.add(\n        first_name,\n        last_name,\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        greetings,\n    )\n\nft.app(main)\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In the very beginning of ",(0,o.jsx)(n.code,{children:"main()"})," method we create three controls which we are going to use in button's ",(0,o.jsx)(n.code,{children:"on_click"})," handler: two ",(0,o.jsx)(n.code,{children:"TextField"})," for first and last names and a ",(0,o.jsx)(n.code,{children:"Column"})," - container for greeting messages. We create controls with all their properties set and in the end of ",(0,o.jsx)(n.code,{children:"main()"})," method, in ",(0,o.jsx)(n.code,{children:"page.add()"})," call, we use their references (variables)."]}),"\n",(0,o.jsxs)(n.p,{children:["When more and more controls and event handlers are added it becomes challenging to keep all control definitions in one place, so they become scattered across ",(0,o.jsx)(n.code,{children:"main()"})," body. Glancing at ",(0,o.jsx)(n.code,{children:"page.add()"})," parameters it's hard to imagine (without constant jumping to variable definitions in IDE) what would the end form look like:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"{2-5}",children:'    page.add(\n        first_name,\n        last_name,\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        greetings,\n    )\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Is ",(0,o.jsx)(n.code,{children:"first_name"})," a TextField, does it have autofocus set? Is greetings a ",(0,o.jsx)(n.code,{children:"Row"})," or a ",(0,o.jsx)(n.code,{children:"Column"}),"?"]}),"\n",(0,o.jsxs)(n.h2,{id:"ref-class",children:[(0,o.jsx)(n.code,{children:"Ref"})," class"]}),"\n",(0,o.jsxs)(n.p,{children:["Flet provides ",(0,o.jsx)(n.code,{children:"Ref"})," utility class which allows to define a reference to the control, use that reference in event handlers and set the reference to a real control later, while building a tree. The idea comes from ",(0,o.jsx)(n.a,{href:"https://reactjs.org/docs/refs-and-the-dom.html",children:"React"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"To define a new typed control reference:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"first_name = ft.Ref[ft.TextField]()\n"})}),"\n",(0,o.jsxs)(n.p,{children:["To access referenced control (control de-reference) use ",(0,o.jsx)(n.code,{children:"Ref.current"})," property:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'# empty first name\nfirst_name.current.value = ""\n'})}),"\n",(0,o.jsxs)(n.p,{children:["To assign control to a reference set ",(0,o.jsx)(n.code,{children:"Control.ref"})," property to a reference:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"{2}",children:'page.add(\n    ft.TextField(ref=first_name, label="First name", autofocus=True)\n)\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["All Flet controls have ",(0,o.jsx)(n.code,{children:"ref"})," property."]})}),"\n",(0,o.jsx)(n.p,{children:"We could re-write our program to use references:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",metastring:"{7-9,21-24}",children:'import flet as ft\n\n\ndef main(page):\n\n    first_name = ft.Ref[ft.TextField]()\n    last_name = ft.Ref[ft.TextField]()\n    greetings = ft.Ref[ft.Column]()\n\n    def btn_click(e):\n        greetings.current.controls.append(\n            ft.Text(f"Hello, {first_name.current.value} {last_name.current.value}!")\n        )\n        first_name.current.value = ""\n        last_name.current.value = ""\n        page.update()\n        first_name.current.focus()\n\n    page.add(\n        ft.TextField(ref=first_name, label="First name", autofocus=True),\n        ft.TextField(ref=last_name, label="Last name"),\n        ft.ElevatedButton("Say hello!", on_click=btn_click),\n        ft.Column(ref=greetings),\n    )\n\nft.app(main)\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Now we can clearly see in ",(0,o.jsx)(n.code,{children:"page.add()"})," the structure of the page and all the controls it's built of."]}),"\n",(0,o.jsxs)(n.p,{children:["Yes, the logic becomes a little bit more verbose as you need to add ",(0,o.jsx)(n.code,{children:".current."})," to access ref's control, but it's a matter of personal preference :)"]})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var o=t(96540);const r={},s=o.createContext(r);function a(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);