"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[44547],{72194:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>r});var o=n(74848),s=n(28453);const l={title:"Custom controls",sidebar_label:"Custom controls"},i=void 0,c={id:"getting-started/custom-controls",title:"Custom controls",description:"While Flet provides 100+ built-in controls that can be used on their own, the real beauty of programming with Flet is that all those controls can be utilized for creating your own reusable UI components using Python object-oriented programming concepts.",source:"@site/docs/getting-started/custom-controls.md",sourceDirName:"getting-started",slug:"/getting-started/custom-controls",permalink:"/docs/flet-docs/docs/getting-started/custom-controls",draft:!1,unlisted:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/getting-started/custom-controls.md",tags:[],version:"current",frontMatter:{title:"Custom controls",sidebar_label:"Custom controls"},sidebar:"docs",previous:{title:"Flet controls",permalink:"/docs/flet-docs/docs/getting-started/flet-controls"},next:{title:"Adaptive apps",permalink:"/docs/flet-docs/docs/getting-started/adaptive-apps"}},d={},r=[{value:"Styled controls",id:"styled-controls",level:2},{value:"Handling events",id:"handling-events",level:3},{value:"Composite controls",id:"composite-controls",level:2},{value:"Life-cycle methods",id:"life-cycle-methods",level:2},{value:"<code>build()</code>",id:"build",level:3},{value:"<code>did_mount()</code>",id:"did_mount",level:3},{value:"<code>will_unmount()</code>",id:"will_unmount",level:3},{value:"<code>before_update()</code>",id:"before_update",level:3},{value:"Isolated controls",id:"isolated-controls",level:2}];function a(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"While Flet provides 100+ built-in controls that can be used on their own, the real beauty of programming with Flet is that all those controls can be utilized for creating your own reusable UI components using Python object-oriented programming concepts."}),"\n",(0,o.jsx)(t.p,{children:"You can create custom controls in Python by styling and/or combining existing Flet controls."}),"\n",(0,o.jsx)(t.h2,{id:"styled-controls",children:"Styled controls"}),"\n",(0,o.jsx)(t.p,{children:"The most simple custom control you can create is a styled control, for example, a button of a certain color and behaviour that will be used multiple times throughout your app."}),"\n",(0,o.jsxs)(t.p,{children:["To create a styled control, you need to create a new class in Python that inherits from the Flet control you are going to customize, ",(0,o.jsx)(t.code,{children:"ElevatedButton"})," in this case:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"class MyButton(ft.ElevatedButton)\n    def __init__(self, text):\n        super().__init__()\n        self.bgcolor = ft.Colors.ORANGE_300\n        self.color = ft.Colors.GREEN_800\n        self.text = text     \n"})}),"\n",(0,o.jsxs)(t.p,{children:["Your control has a constructor to customize properties and events and pass custom data. Note that you must call ",(0,o.jsx)(t.code,{children:"super().__init__()"})," in your own constructor to have access to the properties and methods of the Flet control from which you inherit."]}),"\n",(0,o.jsx)(t.p,{children:"Now you can use your brand-new control in your app:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'import flet as ft\n\ndef main(page: ft.Page):\n\n    page.add(MyButton(text="OK"), MyButton(text="Cancel"))\n\nft.app(main)\n\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docs/custom-controls/styled-controls.png",className:"screenshot-20"}),"\n",(0,o.jsxs)(t.p,{children:["See example of using styled controls in ",(0,o.jsx)(t.a,{href:"/docs/tutorials/python-calculator#styled-controls",children:"Calculator App tutotial"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"handling-events",children:"Handling events"}),"\n",(0,o.jsx)(t.p,{children:"Similar to properties, you can pass event handlers as parameters into your custom control class constructor:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'import flet as ft\n\nclass MyButton(ft.ElevatedButton):\n    def __init__(self, text, on_click):\n        super().__init__()\n        self.bgcolor = ft.Colors.ORANGE_300\n        self.color = ft.Colors.GREEN_800\n        self.text = text\n        self.on_click = on_click\n\ndef main(page: ft.Page):\n\n    def ok_clicked(e):\n        print("OK clicked")\n    \n    def cancel_clicked(e):\n        print("Cancel clicked")\n\n    page.add(\n        MyButton(text="OK", on_click=ok_clicked),\n        MyButton(text="Cancel", on_click=cancel_clicked),\n    )\n\nft.app(main)\n'})}),"\n",(0,o.jsx)(t.h2,{id:"composite-controls",children:"Composite controls"}),"\n",(0,o.jsxs)(t.p,{children:["Composite custom controls inherit from container controls such as ",(0,o.jsx)(t.code,{children:"Column"}),", ",(0,o.jsx)(t.code,{children:"Row"}),", ",(0,o.jsx)(t.code,{children:"Stack"})," or even ",(0,o.jsx)(t.code,{children:"View"})," to combine multiple Flet controls. The example below is a ",(0,o.jsx)(t.code,{children:"Task"})," control that can be used in a To-Do app:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:'import flet as ft\nclass Task(ft.Row):\n    def __init__(self, text):\n        super().__init__()\n        self.text_view = ft.Text(text)\n        self.text_edit = ft.TextField(text, visible=False)\n        self.edit_button = ft.IconButton(icon=ft.Icons.EDIT, on_click=self.edit)\n        self.save_button = ft.IconButton(\n            visible=False, icon=ft.Icons.SAVE, on_click=self.save\n        )\n        self.controls = [\n            ft.Checkbox(),\n            self.text_view,\n            self.text_edit,\n            self.edit_button,\n            self.save_button,\n        ]\n\n    def edit(self, e):\n        self.edit_button.visible = False\n        self.save_button.visible = True\n        self.text_view.visible = False\n        self.text_edit.visible = True\n        self.update()\n\n    def save(self, e):\n        self.edit_button.visible = True\n        self.save_button.visible = False\n        self.text_view.visible = True\n        self.text_edit.visible = False\n        self.text_view.value = self.text_edit.value\n        self.update()\n\ndef main(page: ft.Page):\n\n    page.add(\n        Task(text="Do laundry"),\n        Task(text="Cook dinner"),\n    )\n\n\nft.app(main)\n'})}),"\n",(0,o.jsx)("img",{src:"/img/docs/custom-controls/composite-controls.gif",className:"screenshot-60"}),"\n",(0,o.jsxs)(t.p,{children:["You can find more examples of composite custom controls in ",(0,o.jsx)(t.a,{href:"https://github.com/flet-dev/examples/tree/main/python/community",children:"community examples"})," and ",(0,o.jsx)(t.a,{href:"https://github.com/flet-dev/flet-contrib/tree/main/flet_contrib",children:"flet-contrib"})," repos."]}),"\n",(0,o.jsx)(t.h2,{id:"life-cycle-methods",children:"Life-cycle methods"}),"\n",(0,o.jsx)(t.p,{children:'Custom controls provide life-cycle "hook" methods that you may need to use for different use cases in your app.'}),"\n",(0,o.jsx)(t.h3,{id:"build",children:(0,o.jsx)(t.code,{children:"build()"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"build()"})," method is called when the control is being created and assigned its ",(0,o.jsx)(t.code,{children:"self.page"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Override ",(0,o.jsx)(t.code,{children:"build()"})," method if you need to implement logic that cannot be executed in control's constructor because it requires access to the ",(0,o.jsx)(t.code,{children:"self.page"}),". For example, choose the right icon depending on ",(0,o.jsx)(t.code,{children:"self.page.platform"})," for your ",(0,o.jsx)(t.a,{href:"/docs/getting-started/adaptive-apps/#custom-adaptive-controls",children:"adaptive app"}),"."]}),"\n",(0,o.jsx)(t.h3,{id:"did_mount",children:(0,o.jsx)(t.code,{children:"did_mount()"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"did_mount()"})," method is called after the control is added to the page and assigned transient ",(0,o.jsx)(t.code,{children:"uid"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Override ",(0,o.jsx)(t.code,{children:"did_mount()"})," method if you need to implement logic that needs to be executed after the control was added to the page, for example ",(0,o.jsx)(t.a,{href:"https://github.com/flet-dev/examples/tree/main/python/community/weather_widget",children:"Weather widget"})," which calls Open Weather API every minute to update itself with the new weather conditions."]}),"\n",(0,o.jsx)(t.h3,{id:"will_unmount",children:(0,o.jsx)(t.code,{children:"will_unmount()"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"will_unmount()"})," method is called before the control is removed from the page."]}),"\n",(0,o.jsxs)(t.p,{children:["Override ",(0,o.jsx)(t.code,{children:"will_unmount()"})," method to execute clean-up code."]}),"\n",(0,o.jsx)(t.h3,{id:"before_update",children:(0,o.jsx)(t.code,{children:"before_update()"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"before_update()"})," method is called every time when the control is being updated."]}),"\n",(0,o.jsxs)(t.p,{children:["Make sure not to call ",(0,o.jsx)(t.code,{children:"update()"})," method within ",(0,o.jsx)(t.code,{children:"before_update()"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"isolated-controls",children:"Isolated controls"}),"\n",(0,o.jsxs)(t.p,{children:["Custom control has ",(0,o.jsx)(t.code,{children:"is_isolated"})," property which defaults to ",(0,o.jsx)(t.code,{children:"False"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["If you set ",(0,o.jsx)(t.code,{children:"is_isolated"})," to ",(0,o.jsx)(t.code,{children:"True"}),", your control will be isolated from outside layout, i.e. when ",(0,o.jsx)(t.code,{children:"update()"})," method is called for the parent control, the control itself will be updated but any changes to the controls' children are not included into the update digest. Isolated controls should call ",(0,o.jsx)(t.code,{children:"self.update()"})," to push its changes to a Flet page."]}),"\n",(0,o.jsxs)(t.p,{children:["As a best practice, any custom control that calls ",(0,o.jsx)(t.code,{children:"self.update()"})," inside its class methods should be isolated."]}),"\n",(0,o.jsxs)(t.p,{children:["In the above examples, simple styled ",(0,o.jsx)(t.code,{children:"MyButton"})," doesn't need to be isolated, but the ",(0,o.jsx)(t.code,{children:"Task"})," should be:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"class Task(ft.Row):\n    def __init__(self, text):\n        super().__init__()\n        self.isolated = True\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var o=n(96540);const s={},l=o.createContext(s);function i(e){const t=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(l.Provider,{value:t},e.children)}}}]);