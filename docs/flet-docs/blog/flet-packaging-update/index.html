<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Flet packaging update | Flet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Flet packaging update | Flet"><meta data-rh="true" name="description" content="The problem"><meta data-rh="true" property="og:description" content="The problem"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-05-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/FeodorFitsner"><meta data-rh="true" property="article:tag" content="releases"><link data-rh="true" rel="icon" href="/docs/flet-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update"><link data-rh="true" rel="alternate" href="https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update" hreflang="en"><link data-rh="true" rel="alternate" href="https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ESNSJEY7OD-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update","mainEntityOfPage":"https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update","url":"https://python-and-novella.github.io/docs/flet-docs/blog/flet-packaging-update","headline":"Flet packaging update","name":"Flet packaging update","description":"The problem","datePublished":"2024-05-01T00:00:00.000Z","author":{"@type":"Person","name":"Feodor Fitsner","description":"Flet founder and developer","url":"https://github.com/FeodorFitsner","image":"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://python-and-novella.github.io/docs/flet-docs/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/docs/flet-docs/blog/rss.xml" title="Flet RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/flet-docs/blog/atom.xml" title="Flet Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Flet" href="/docs/flet-docs/opensearch.xml"><link rel="stylesheet" href="/docs/flet-docs/assets/css/styles.4e17ce33.css">
<script src="/docs/flet-docs/assets/js/runtime~main.01e4a513.js" defer="defer"></script>
<script src="/docs/flet-docs/assets/js/main.54696e0d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like Flet, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/flet-dev/flet">GitHub</a> and join the discussion on <a target="_blank" rel="noopener noreferrer" href="https://discord.gg/dzWXP8SHG8">Discord</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/flet-docs/"><div class="navbar__logo"><img src="/docs/flet-docs/img/logo.svg" alt="Flet Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/flet-docs/img/logo.svg" alt="Flet Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Flet</b></a><a class="navbar__item navbar__link" href="/docs/flet-docs/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/flet-docs/gallery">Gallery</a><a class="navbar__item navbar__link" href="/docs/flet-docs/roadmap">Roadmap</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/flet-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/flet-dev/flet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-v-0-26-release-announcement">Flet v0.26.0 Release Announcement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-v-0-25-release-announcement">Flet v0.25.0 Release Announcement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/pyproject-toml-support-for-flet-build-command">pyproject.toml support for flet build command</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-new-packaging-pre-release">Flet new packaging pre-release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-v-0-24-release-announcement">Flet v0.24.0 Release Announcement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-v-0-23-release-announcement">Flet v0.23.0 Release Announcement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-at-pycon-us-2024">Flet at PyCon US 2024</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/docs/flet-docs/blog/flet-packaging-update">Flet packaging update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/controls-and-theming-enhancements">Controls and theming enhancements</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-fastapi-and-async-api-improvements">Flet FastAPI and async API improvements</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-adaptive-and-custom-controls">Flet adaptive UI and custom controls release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/packaging-apps-for-distribution">Packaging apps for distribution</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-for-fastapi">Flet for FastAPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-for-android">Flet for Android</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-for-ios">Flet for iOS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/scrolling-controls-and-theming">Scrolling controls and Theming</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/canvas">Canvas</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-charts">Flet Charts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/standalone-flet-web-apps-with-pyodide">Standalone Flet web apps with Pyodide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/packaging-desktop-apps-with-custom-icon">Packaging desktop apps with a custom icon</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-mobile-update">Flet mobile update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-versioning-and-pre-releases">Flet versioning and pre-releases</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/responsive-row-and-mobile-controls">ResponsiveRow and mobile controls</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/matplotlib-and-plotly-charts">Matplotlib and Plotly charts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/gesture-detector">Gesture detector</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/user-authentication">User authentication</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/file-picker-and-uploads">File picker and uploads</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/fun-with-animations">Fun with animations</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/gradients-button-textfield-styles">Beautiful gradients, button styles and TextField rounded corners in a new Flet release</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/control-refs">Control Refs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/flet-mobile-strategy">Flet Mobile Strategy</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/navigation-and-routing">Navigation and Routing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/drag-and-drop-release">New release: Drag and Drop, absolute positioning and clickable container</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/using-custom-fonts-in-flet-app">Using custom fonts in a Flet app</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/docs/flet-docs/blog/introducing-flet">Introducing Flet</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Flet packaging update</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-05-01T00:00:00.000Z">May 1, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/FeodorFitsner" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars0.githubusercontent.com/u/5041459?s=400&amp;v=4" alt="Feodor Fitsner"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/FeodorFitsner" target="_blank" rel="noopener noreferrer"><span>Feodor Fitsner</span></a></div><small class="avatar__subtitle">Flet founder and developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="the-problem">The problem<a class="hash-link" aria-label="Direct link to The problem" title="Direct link to The problem" href="/docs/flet-docs/blog/flet-packaging-update#the-problem">​</a></h2>
<p>When you package your Flet program in Python to run on a mobile device (or desktop) the resulting
bundle (.apk, .ipa, .exe, .app) contains your Python program, Python interpreter and <a href="https://docs.python.org/3/library/index.html" target="_blank" rel="noopener noreferrer">Python Standard Library</a>.</p>
<p>If your program uses only Python standard library then packaging process is relatively easy - Flet zips your code and combines Flutter app together with Python interpreter and standard library both compiled for the target platform: Android or iOS.</p>
<p>However, problems may arise when your Flet program uses third-party packages, with thousands of them published on PyPI or Conda.</p>
<p>There are two kinds of third-party packages:</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pure-python-packages">Pure-Python packages<a class="hash-link" aria-label="Direct link to Pure-Python packages" title="Direct link to Pure-Python packages" href="/docs/flet-docs/blog/flet-packaging-update#pure-python-packages">​</a></h3>
<p>A &quot;pure-Python&quot; package is a package that only contains Python code, and doesn&#x27;t include extensions written in C, C++, Rust or other languages. You only need a Python interpreter and the Python Standard Library to run a pure-Python package, and it doesn&#x27;t matter what your OS or platform is.</p>
<p>Examples of such packages: <code>httpx</code>, <code>click</code>, <code>rich</code>, <code>requests</code>.</p>
<p>To verify if the package is pure, find that package on <a href="https://pypi.org" target="_blank" rel="noopener noreferrer">PyPI</a> and navigate to its &quot;Download files&quot; page. If under &quot;Built distribution&quot; section there is only one wheel ending with <code>-py3-none-any.whl</code> then <em>most probably</em> it&#x27;s a pure Python package that will work &quot;as is&quot; on any device with Python.</p>
<img src="/docs/flet-docs/img/blog/packaging/pypi-pure-package.png" class="screenshot-80 screenshot-rounded">
<p>We say <em>&quot;probably&quot;</em> because that pure package could depend on a non-pure package which brings you to the next section. For example, <a href="https://pypi.org/project/pydantic/#files" target="_blank" rel="noopener noreferrer"><code>pydantic</code></a> is a pure package, but to work properly it requires <a href="https://pypi.org/project/pydantic-core/#files" target="_blank" rel="noopener noreferrer"><code>pydantic-core</code></a> non-pure package written in Rust.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-pure-python-packages">Non-pure Python packages<a class="hash-link" aria-label="Direct link to Non-pure Python packages" title="Direct link to Non-pure Python packages" href="/docs/flet-docs/blog/flet-packaging-update#non-pure-python-packages">​</a></h3>
<p>A &quot;non-pure Python&quot; package is one that is fully or partially written in C, C++, Rust, or another language and must be compiled to machine code for the platform on which it will run.</p>
<p>Examples of such packages: <code>cryptography</code>, <code>opencv-python</code>, <code>numpy</code>, <code>msgpack</code>.</p>
<p>On &quot;Download files&quot; page of non-pure package you will find a bunch of wheels pre-built for various platforms: macOS, Windows, Linux.</p>
<img src="/docs/flet-docs/img/blog/packaging/pypi-non-pure-package.png" class="screenshot-80 screenshot-rounded">
<p>When you run <code>pip install &lt;package&gt;</code> pip tries to find a wheel for your specific platform and Python version looking at
wheel suffixes that include that information.</p>
<p>It&#x27;s a courtesy of package developer to provide pre-compiled wheels for multiple platforms. There could be missing wheels for some platforms, or no wheels at all - just <code>.tar.gz</code> under &quot;Source distribution&quot; with package sources.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="building-package-from-sources-is-hard">Building package from sources is hard<a class="hash-link" aria-label="Direct link to Building package from sources is hard" title="Direct link to Building package from sources is hard" href="/docs/flet-docs/blog/flet-packaging-update#building-package-from-sources-is-hard">​</a></h4>
<p>To install a package with source distribution only, pip will attempt to build non-Python code on your machine using installed compilers, linkers, libraries, and SDKs. However, this process can be lengthy and error-prone. The compiled code base might be large, and your machine could lack the required libraries or toolchains.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="no-wheels-for-ios-and-android-yet">No wheels for iOS and Android yet<a class="hash-link" aria-label="Direct link to No wheels for iOS and Android yet" title="Direct link to No wheels for iOS and Android yet" href="/docs/flet-docs/blog/flet-packaging-update#no-wheels-for-ios-and-android-yet">​</a></h4>
<p>There are no pre-built wheels for iOS and Android on PyPI and PyPI&#x27;s validation process won&#x27;t allow package developers to upload them anyway as both iOS and Android are not officially supported platforms in Python.</p>
<p>There is a process (<a href="https://peps.python.org/pep-0730/" target="_blank" rel="noopener noreferrer">PEP 730</a> and <a href="https://peps.python.org/pep-0738/" target="_blank" rel="noopener noreferrer">PEP 738</a>) to add official support for iOS and Android to Python 3.13, so, hopefully, the developer experience will improve.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="package-dependencies">Package dependencies<a class="hash-link" aria-label="Direct link to Package dependencies" title="Direct link to Package dependencies" href="/docs/flet-docs/blog/flet-packaging-update#package-dependencies">​</a></h4>
<p>Pure-Python packages can import or depend on non-pure packages and you should keep that in mind while packaging your Flet app to run on a mobile device.</p>
<p>For example, <code>supabase</code> package, to access Supabase API, is a pure package which depends on <code>pydantic</code> package which is also pure Python package. In its turn <code>pydantic</code> package depends on <code>pydantic-core</code> which is a non-pure package written in Rust. Thus, to run your Flet app using Supabase API the packaging process should be able to find a pre-build wheel for your target platform. If PyPI doesn&#x27;t have that wheel then it could be either Flet developers, building that wheel on their servers and hosting it somewhere, or you, building that wheel on your own machine.</p>
<p>To see a dependency graph for a package you can use <a href="https://pypi.org/project/pipgrip/" target="_blank" rel="noopener noreferrer"><code>pipgrip</code></a>.</p>
<p>Run it with <code>--tree</code> option to get a tree view of dependencies:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pipgrip --tree fastapi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fastapi (0.110.3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,&lt;3.0.0,&gt;=1.7.4 (2.7.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── annotated-types&gt;=0.4.0 (0.6.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── pydantic-core==2.18.2 (2.18.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── typing-extensions!=4.7.0,&gt;=4.6.0 (4.11.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── typing-extensions&gt;=4.6.1 (4.11.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── starlette&lt;0.38.0,&gt;=0.37.2 (0.37.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── anyio&lt;5,&gt;=3.4.0 (4.3.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── idna&gt;=2.8 (3.7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── sniffio&gt;=1.1 (1.3.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── typing-extensions&gt;=4.8.0 (4.11.0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="current-approach">Current approach<a class="hash-link" aria-label="Direct link to Current approach" title="Direct link to Current approach" href="/docs/flet-docs/blog/flet-packaging-update#current-approach">​</a></h2>
<p>We released the first version of packaging <a href="/docs/flet-docs/blog/packaging-apps-for-distribution">4 months ago</a> and since then, we have realized that the initial approach has multiple flaws and should be improved.</p>
<p>When you run <code>flet build apk</code> with the current Flet version it downloads Python runtime with standard library both pre-built for Android (or iOS if ran with <code>flet build ipa</code>).</p>
<p>For non-pure packages, like <code>numpy</code>, Flet is asking you to build those packages by yourself using &quot;Python for Android&quot; (p4a) tool from Kivy and then provide a path to &quot;p4a&quot; distributive where those pre-build packages could be found.</p>
<p>This is problem #1 - you are forced to struggle with a complicated process of installing &quot;p4a&quot; tool and compiling Python modules on your machine.</p>
<p>Problem #2 - all packages from p4a&#x27;s <code>dist</code> directory will be included into a final application bundle - it could contain non-relevant packages and other junk.</p>
<p>Problem #3 - non-pure packages must be built <em>before</em> running <code>flet build</code> command. You have to analyze all dependencies of your app and separate what must be built with p4a.</p>
<p>Problem #4 - p4a &quot;recipes&quot; to build packages could be either very old or missing. You hope that older version of the package works with your app, try authoring a &quot;recipe&quot; and hope it works or submit a request for new recipe in Kivy repository.</p>
<p>When you&#x27;re done with building non-pure packages using p4a, Flet requires you to specify only pure packages in <code>requirements.txt</code> which doesn&#x27;t work if pure package directly or indirectly depends on non-pure (see <a href="/docs/flet-docs/blog/flet-packaging-update#package-dependencies">example above</a>) - this is problem #5. There is a <a href="https://github.com/flet-dev/flet/issues/3114" target="_blank" rel="noopener noreferrer">recent example</a> of this problem: <code>flet build</code> replaces <code>flet</code> with <code>flet-embed</code> in <code>requirements.txt</code>, but it&#x27;s unable to know if there is a 3rd-party package depending on <code>flet</code>, thus both <code>flet-embed</code> and non-suitable-for-mobile <code>flet</code> are installed. This is not a solution, but a hack!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="packaging-20">Packaging 2.0<a class="hash-link" aria-label="Direct link to Packaging 2.0" title="Direct link to Packaging 2.0" href="/docs/flet-docs/blog/flet-packaging-update#packaging-20">​</a></h2>
<p>In the next iteration of Flet&#x27;s packaging implementation, we are going to move away from Kivy and replace it with <a href="https://github.com/flet-dev/mobile-forge" target="_blank" rel="noopener noreferrer">Mobile Forge</a>. Mobile Forge has been created by Beeware team based and their experience with Briefcase and Chaquopy. Mobile Forge is a clean-room implementation of a packaging tool for binary Python packages which is relies on <a href="https://github.com/benfogle/crossenv" target="_blank" rel="noopener noreferrer">crossenv</a>.</p>
<p>The main promise of Mobile Forge with <code>crossenv</code> is that most existing non-pure Python packages will be able to compile for iOS and/or Android by simply adding a recipe with <code>meta.yaml</code> file only, without requiring any hacks or patches.</p>
<p>We are going to use Mobile Forge to pre-build the most popular non-pure Python packages for iOS and Android and host them in our own public repository. You will be able to use that tool to build and contribute other packages, non present in our repository.</p>
<p>We&#x27;ve created a new <a href="https://github.com/flet-dev/flet/discussions/categories/packages" target="_blank" rel="noopener noreferrer">&quot;Packages&quot; category in Flet discussions</a> where you can post, vote and discuss requests for non-pure (native) Python packages that work with Flet (check <a href="https://github.com/flet-dev/flet/discussions/3139" target="_blank" rel="noopener noreferrer">rules</a> before posting there). Flet&#x27;s goal is to provide the most comprehensive catalog of pre-built Python packages and make the process of adding new packages as friendly and transparent as possible.</p>
<p>The new version of <code>flet build</code> will use a custom-made virtual pip index. This index will analyze dependencies, detect non-pure packages, and offer to pip mobile packages. For all other packages, it will fall back to PyPI.</p>
<p>The new packaging will be hopefully available in a few weeks. While we are working we encourage you to visit <a href="https://github.com/flet-dev/flet/discussions/categories/packages" target="_blank" rel="noopener noreferrer">Packages</a> and see if the package you need is there. Submitting a request or voting for existing package will help us to prioritize package &quot;recipes&quot;.</p>
<p>Thank you!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/flet-docs/blog/tags/releases">releases</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/flet-dev/website/edit/main/blog/2024-05-01-flet-packaging-update.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/flet-docs/blog/flet-at-pycon-us-2024"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Flet at PyCon US 2024</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/flet-docs/blog/controls-and-theming-enhancements"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Controls and theming enhancements</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/flet-docs/blog/flet-packaging-update#the-problem">The problem</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/flet-docs/blog/flet-packaging-update#pure-python-packages">Pure-Python packages</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/flet-docs/blog/flet-packaging-update#non-pure-python-packages">Non-pure Python packages</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/flet-docs/blog/flet-packaging-update#current-approach">Current approach</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/flet-docs/blog/flet-packaging-update#packaging-20">Packaging 2.0</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/flet-docs/docs">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/flet-docs/docs/controls">Controls reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/dzWXP8SHG8" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/flet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/flet-docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/flet-dev/flet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/flet-docs/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/flet-docs/privacy-policy">Privacy policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Appveyor Systems Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>