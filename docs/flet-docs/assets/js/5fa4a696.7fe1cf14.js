"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[99425],{92403:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var i=t(74848),o=t(28453);const s={title:"Fly.io",sidebar_label:"Fly.io"},r=void 0,l={id:"publish/web/dynamic-website/hosting/fly-io",title:"Fly.io",description:"Fly.io has robust WebSocket support and can deploy your app to a data center that is close to your users. They have very attractive pricing with a generous free tier which allows you to host up to 3 applications for free.",source:"@site/docs/publish/web/dynamic-website/hosting/fly-io.md",sourceDirName:"publish/web/dynamic-website/hosting",slug:"/publish/web/dynamic-website/hosting/fly-io",permalink:"/flet-docs/docs/publish/web/dynamic-website/hosting/fly-io",draft:!1,unlisted:!1,editUrl:"https://github.com/flet-dev/website/edit/main/docs/publish/web/dynamic-website/hosting/fly-io.md",tags:[],version:"current",frontMatter:{title:"Fly.io",sidebar_label:"Fly.io"},sidebar:"docs",previous:{title:"Hosting Flet web apps",permalink:"/flet-docs/docs/publish/web/dynamic-website/hosting"},next:{title:"Replit",permalink:"/flet-docs/docs/publish/web/dynamic-website/hosting/replit"}},a={},c=[];function p(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://fly.io",children:"Fly.io"})," has robust WebSocket support and can deploy your app to a ",(0,i.jsx)(n.a,{href:"https://fly.io/docs/reference/regions/",children:"data center"})," that is close to your users. They have very attractive pricing with a ",(0,i.jsx)(n.a,{href:"https://fly.io/docs/about/pricing/#free-allowances",children:"generous free tier"})," which allows you to host up to 3 applications for free."]}),"\n",(0,i.jsxs)(n.p,{children:["To get started with Fly install ",(0,i.jsx)(n.a,{href:"https://fly.io/docs/getting-started/installing-flyctl/",children:"flyctl"})," and then authenticate:"]}),"\n",(0,i.jsx)(n.p,{children:"fly auth login"}),"\n",(0,i.jsxs)(n.p,{children:["To deploy the app with ",(0,i.jsx)(n.code,{children:"flyctl"})," you have to add the following 3 files into the folder with your Python app."]}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"requirements.txt"})," with a list of application dependencies. At minimum it should contain ",(0,i.jsx)(n.code,{children:"flet"})," module:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",metastring:'title="requirements.txt"',children:"flet\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"fly.toml"})," describing Fly application:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="fly.toml"',children:'app = "<your-app-name>"\n\nkill_signal = "SIGINT"\nkill_timeout = 5\nprocesses = []\n\n[env]\n  FLET_SESSION_TIMEOUT = "60"\n\n[http_service]\n  internal_port = 8000\n  force_https = true\n  auto_stop_machines = true\n  auto_start_machines = true\n  min_machines_running = 0\n\n  [http_service.concurrency]\n    type = "connections"\n    soft_limit = 200\n    hard_limit = 250\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.code,{children:"<your-app-name>"})," with desired application name which will be also used in application URL, such as ",(0,i.jsx)(n.code,{children:"https://<your-app-name>.fly.dev"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["By default, Flet web app will be running on port ",(0,i.jsx)(n.code,{children:"8000"}),", but you can change that by setting up ",(0,i.jsx)(n.code,{children:"FLET_SERVER_PORT"})," environment variable."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"FLET_SESSION_TIMEOUT"})," is a user session lifetime, in seconds."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/docs/publish/web/dynamic-website#environment-variables",children:"Complete list of environment variables"})," supported by a web app."]}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"Dockerfile"})," containing the commands to build your application container:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Dockerfile",metastring:'title="Dockerfile"',children:'FROM python:3-alpine\n\nWORKDIR /app\n\nCOPY requirements.txt ./\nRUN pip install --no-cache-dir -r requirements.txt\n\nCOPY . .\n\nEXPOSE 8000\n\nCMD ["python", "main.py"]\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"main.py"})," is a file with your Python program."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Fly.io deploys every app as a Docker container, but a great thing about Fly is that it provides a free remote Docker builder, so you don't need Docker installed on your machine."})}),"\n",(0,i.jsx)(n.p,{children:"Next, switch command line to a folder with your app and run the following command to create and initialize a new Fly app:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fly apps create --name <your-app-name>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Deploy the app by running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fly deploy\n"})}),"\n",(0,i.jsx)(n.p,{children:"That's it! Open your app in the browser by running:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"fly apps open\n"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);